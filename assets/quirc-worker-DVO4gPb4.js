(function(){"use strict";function tn(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Y={exports:{}};(function(i,o){var a=(()=>{var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n={}){var n=typeof n<"u"?n:{},v,h;n.ready=new Promise(function(e,t){v=e,h=t});var O=Object.assign({},n),k=!0,l="";function z(e){return n.locateFile?n.locateFile(e,l):l+e}var U;l=self.location.href,f&&(l=f),l.indexOf("blob:")!==0?l=l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):l="",U=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)},n.print||console.log.bind(console);var m=n.printErr||console.warn.bind(console);Object.assign(n,O),O=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit;var R;n.wasmBinary&&(R=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&w("no native wasm support detected");var A,S=!1,d=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function y(e,t,c){for(var r=t+c,_=t;e[_]&&!(_>=r);)++_;if(_-t>16&&e.buffer&&d)return d.decode(e.subarray(t,_));for(var p="";t<_;){var s=e[t++];if(!(s&128)){p+=String.fromCharCode(s);continue}var G=e[t++]&63;if((s&224)==192){p+=String.fromCharCode((s&31)<<6|G);continue}var nn=e[t++]&63;if((s&240)==224?s=(s&15)<<12|G<<6|nn:s=(s&7)<<18|G<<12|nn<<6|e[t++]&63,s<65536)p+=String.fromCharCode(s);else{var en=s-65536;p+=String.fromCharCode(55296|en>>10,56320|en&1023)}}return p}function T(e,t){return e?y(P,e,t):""}var P;function X(){var e=A.buffer;n.HEAP8=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=new Int32Array(e),n.HEAPU8=P=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=new Float64Array(e)}var C=[],W=[],D=[];function I(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)q(n.preRun.shift());V(C)}function j(){V(W)}function H(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)F(n.postRun.shift());V(D)}function q(e){C.unshift(e)}function L(e){W.unshift(e)}function F(e){D.unshift(e)}var g=0,b=null;function u(e){g++,n.monitorRunDependencies&&n.monitorRunDependencies(g)}function M(e){if(g--,n.monitorRunDependencies&&n.monitorRunDependencies(g),g==0&&b){var t=b;b=null,t()}}function w(e){n.onAbort&&n.onAbort(e),e="Aborted("+e+")",m(e),S=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw h(t),t}var un="data:application/octet-stream;base64,";function Q(e){return e.startsWith(un)}var E;E="quirc.wasm",Q(E)||(E=z(E));function $(e){try{if(e==E&&R)return new Uint8Array(R);if(U)return U(e);throw"both async and sync fetching of the wasm failed"}catch(t){w(t)}}function cn(e){return!R&&k&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(function(){return $(e)}):Promise.resolve().then(function(){return $(e)})}function J(e,t,c){return cn(e).then(function(r){return WebAssembly.instantiate(r,t)}).then(function(r){return r}).then(c,function(r){m("failed to asynchronously prepare wasm: "+r),w(r)})}function fn(e,t,c,r){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Q(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(function(_){var p=WebAssembly.instantiateStreaming(_,c);return p.then(r,function(s){return m("wasm streaming compile failed: "+s),m("falling back to ArrayBuffer instantiation"),J(t,c,r)})}):J(t,c,r)}function ln(){var e={a:gn};function t(r,_){var p=r.exports;return n.asm=p,A=n.asm.d,X(),n.asm.n,L(n.asm.e),M(),p}u();function c(r){t(r.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(r){m("Module.instantiateWasm callback failed with error: "+r),h(r)}return fn(R,E,e,c).catch(h),{}}function V(e){for(;e.length>0;)e.shift()(n)}function mn(e,t,c,r){w("Assertion failed: "+T(e)+", at: "+[t?T(t):"unknown filename",c,r?T(r):"unknown function"])}function pn(e,t,c){P.copyWithin(e,t,t+c)}function dn(e){w("OOM")}function yn(e){P.length,dn()}var gn={a:mn,c:pn,b:yn};ln(),n._prepare=function(){return(n._prepare=n.asm.f).apply(null,arguments)},n._begin=function(){return(n._begin=n.asm.g).apply(null,arguments)},n._end=function(){return(n._end=n.asm.h).apply(null,arguments)},n._count=function(){return(n._count=n.asm.i).apply(null,arguments)},n._get=function(){return(n._get=n.asm.j).apply(null,arguments)},n._get_corners=function(){return(n._get_corners=n.asm.k).apply(null,arguments)},n._get_length=function(){return(n._get_length=n.asm.l).apply(null,arguments)},n._get_type=function(){return(n._get_type=n.asm.m).apply(null,arguments)};var N;b=function e(){N||Z(),N||(b=e)};function Z(){if(g>0||(I(),g>0))return;function e(){N||(N=!0,n.calledRun=!0,!S&&(j(),v(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),H()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),e()},1)):e()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Z(),n.ready}})();i.exports=a})(Y);var rn=Y.exports,on=tn(rn);let B;const an={async detect({data:i,width:o,height:a}){if(!B){const y=await(await fetch(new URL("/react-barcode-scanner/assets/quirc-BDDjxxXU.wasm",self.location.href))).arrayBuffer();B=await on({wasmBinary:y})}const{_prepare:f}=B;if(!f(o,a))throw new Error("Unable to allocate memory");const{_begin:x,_end:n,_count:v,_get:h,_get_length:O,_get_type:k,_get_corners:l,HEAP8:z}=B,U=x(),m=z.buffer,R=new Uint8Array(m,U,o*a);K(R,i),n();let A=v();if(A===0){const d=x(),y=new Uint8Array(m,d,o*a);K(y,i),sn(y),n(),A=v()}const S=[];for(let d=0;d<A;d++){const y=h(d);if(y){const T=O(),P=new Uint8Array(m,y,T),X=k(),C=(()=>{const u=["utf-8","iso-8859-1"];X===8&&u.unshift("shift-jis");for(const M of u)try{return new TextDecoder(M,{fatal:!0}).decode(P)}catch{}})(),W=l(),D=new Int32Array(m,W,8),I=[];for(let u=0;u<4;u++){const M=D[u*2],w=D[u*2+1];I.push({x:M,y:w})}const j=I.map(u=>u.x),H=I.map(u=>u.y),q=Math.min(...j),L=Math.max(...j),F=Math.min(...H),g=Math.max(...H),b=new DOMRectReadOnly(q,F,L-q,g-F);S.push({rawValue:C,boundingBox:b,cornerPoints:I})}}return S}};function K(i,o){for(let a=0,f=0;a<i.length;a++,f+=4){const x=o[f+0],n=o[f+1],v=o[f+2],h=x*59+n*150+v*29>>8;i[a]=h}}function sn(i){for(let o=0;o<i.length;o++)i[o]=255-i[o]}addEventListener("message",async({data:{name:i,args:o}})=>{try{const a=an[i];if(!a)throw new Error(`Unknown method: ${i}`);const f=await a(...o);postMessage({type:"result",result:f})}catch(a){postMessage({type:"error",message:a.message})}})})();
